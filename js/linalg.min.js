function create_rc(r,e){var t=new itf.baseType(r*e);return void 0==e&&(e=1),t.rows=r,t.cols=e,t}function create_clone(r){var e=r.slice();return e.rows=r.rows,e.cols=r.cols,e}function create_doubleArray(r){for(var e=create_rc(r.length,r[0].length),t=e.rows,o=e.cols,a=0;t>a;a++)for(var n=0;o>n;n++)e[a*o+n]=r[a][n];return e}function create_array(r,e){e=e||create_rc(r.length,1);for(var t=0,o=e.rows;o>t;t++)e[t]=r[t];return e}function create_image(r,e){e=e||create_rc(r.height,r.width);var t=e.rows,o=e.cols,a=document.createElement("canvas"),n=a.getContext("2d");a.width=o,a.height=t,n.drawImage(r,0,0);for(var s=n.getImageData(0,0,o,t).data,c=0,i=0,f=s.length;f>c;i+=1,c+=4)e[i]=s[c]/256;return e}function create(){return arguments[0]instanceof Image?create_image(arguments[0]):arguments[0]instanceof itf.baseType?create_clone(arguments[0]):arguments[0]instanceof Array?arguments[0][0]instanceof Array?create_doubleArray(arguments[0]):create_array(arguments[0]):void 0==arguments[1]?create_array([arguments[0]]):create_rc(arguments[0],arguments[1])}function identity(r){for(var e=create_rc(r,r),t=0;r*r>t;t++)e[t]=0;for(var t=0;r>t;t++)e[t*r+t]=1;return e}function sinc(r,e,t){t/=e;for(var o=create_rc(1,r),a=0;r>a;a++){var n=2*Math.PI*t*(a-.5*(r-1));o[a]=n?Math.sin(n)/n:1}return o}function blackman(r){for(var e=create_rc(1,r),t=0;r>t;t++)e[t]=.42-.5*Math.cos(2*Math.PI*t/(r-1))+.08*Math.cos(4*Math.PI*t/(r-1));return e}function hamming(r){for(var e=create_rc(1,r),t=0;r>t;t++)e[t]=.54-.46*Math.cos(2*Math.PI*t/(r-1));return e}function normalize(r,e){r instanceof itf.baseType||(r=create(r));var t=r.rows,o=r.cols;void 0==e&&(e=create_rc(t,o));for(var a=0,n=0;t>n;n++)for(var s=0;o>s;s++)a+=Math.pow(r[n*o+s],2);a=1/Math.sqrt(a);for(var n=0;t>n;n++)for(var s=0;o>s;s++)e[n*o+s]=r[n*o+s]*a;return e}function sum(r){r instanceof itf.baseType||(r=create(r));for(var e=r.rows,t=r.cols,o=0,a=0;e>a;a++)for(var n=0;t>n;n++)o+=r[a*t+n];return o}function wsinc(r,e,t,o){var a=t>1?t:Math.ceil(4/(t/r));a%2||a++;var n=cmul(sinc(a,r,e),o?hamming(a):blackman(a));return mul(n,1/sum(n),n)}function transpose(r,e){r instanceof itf.baseType||(r=create(r));var t=r.rows,o=r.cols;void 0==e&&(e=create_rc(o,t));for(var a=0;t>a;a++)for(var n=0;o>n;n++)e[n*t+a]=r[a*o+n];return e}function row(r,e,t){r instanceof itf.baseType||(r=create(r));var o=new itf.baseType(r.buffer,r.cols*e*8,r.cols*(t||1));return o.rows=t||1,o.cols=r.cols,o}function solveSeidel(r,e,t){r instanceof itf.baseType||(r=create(r)),e instanceof itf.baseType||(e=create(e));var o=create_rc(e.rows,1);if(r.rows!=r.cols)return null;for(var a=0;t>a;a++)for(var n=0;n<r.rows;n++){for(var s=0,c=0;c<r.rows;c++)c!=n&&(s+=r[n*r.cols+c]*o[c]);o[n]=1/r[n*r.cols+n]*(e[n]-s)}return o}function add(r,e,t){if(r instanceof itf.baseType||(r=create(r)),e instanceof itf.baseType||(e=create(e)),1==e.rows&&1==e.cols){t=t||create_clone(r);for(var o=0;o<r.length;o++)t[o]=r[o]+e[0];return t}if(1==r.rows&&1==r.cols){t=t||create_clone(e);for(var o=0;o<e.length;o++)t[o]=r[0]+e[o];return t}var a=r.rows,n=r.cols;void 0==t&&(t=create_rc(a,n));for(var o=0;a*n>o;o++)t[o]=r[o]+e[o];return t}function minus(r,e,t){if(r instanceof itf.baseType||(r=create(r)),e instanceof itf.baseType||(e=create(e)),1==e.rows&&1==e.cols){t=t||create_clone(r);for(var o=0;o<r.length;o++)t[o]=r[o]-e[0];return t}if(1==r.rows&&1==r.cols){t=t||create_clone(e);for(var o=0;o<e.length;o++)t[o]=r[0]-e[o];return t}var a=r.rows,n=r.cols;t=t||create_rc(a,n);for(var o=0;a*n>o;o++)t[o]=r[o]-e[o];return t}function cmul(r,e,t){if(r instanceof itf.baseType||(r=create(r)),e instanceof itf.baseType||(e=create(e)),1==e.rows&&1==e.cols){t=t||create_clone(r);for(var o=0;o<r.length;o++)t[o]=r[o]+e[0];return t}if(1==r.rows&&1==r.cols){t=t||create_clone(e);for(var o=0;o<e.length;o++)t[o]=r[0]+e[o];return t}var a=r.rows,n=r.cols;void 0==t&&(t=create_rc(a,n));for(var o=0;a*n>o;o++)t[o]=r[o]*e[o];return t}function mul(r,e,t){if(r instanceof itf.baseType||(r=create(r)),e instanceof itf.baseType||(e=create(e)),1==e.rows&&1==e.cols){t=t||create_clone(r);for(var o=0;o<r.length;o++)t[o]=r[o]*e[0];return t}if(1==r.rows&&1==r.cols){t=t||create_clone(e);for(var o=0;o<e.length;o++)t[o]=r[0]*e[o];return t}var a=r.rows,n=r.cols,s=e.cols;if(n!=e.rows)return console.error("A.cols != B.rows !!",n,e.rows);t=t||create_rc(a,s);for(var o=0;a>o;o++)for(var c=0;s>c;c++){for(var i=0,f=0;n>f;f++)i+=r[o*n+f]*e[f*s+c];t[o*s+c]=i}return 1==a&&1==s?t[0]:t}function mulATB(r,e,t){r instanceof itf.baseType||(r=create(r)),e instanceof itf.baseType||(e=create(e));var o=r.cols,a=r.rows,n=e.cols;if(a!=e.rows)return console.error("A.cols != B.rows !!",a,e.rows);t=t||create_rc(o,n);for(var s=0;o>s;s++)for(var c=0;n>c;c++){for(var i=0,f=0;a>f;f++)i+=r[f*r.cols+s]*e[f*n+c];t[s*n+c]=i}return t}function mulATBDI(r,e,t){for(var o=0;o<e.length;o++)e[o]=e[o]<1e-7?0:1/e[o];r instanceof itf.baseType||(r=create(r));var a=r.cols,n=r.rows,s=e.length;t=t||create_rc(a,s);for(var o=0;a>o;o++)for(var c=0;s>c;c++)t[o*s+c]=r[c*n+o]*e[c];return t}function mulABT(r,e,t){r instanceof itf.baseType||(r=create(r)),e instanceof itf.baseType||(e=create(e));var o=r.rows,a=r.cols,n=e.rows,s=e.cols;if(a!=s)return console.error("A.cols != B.rows !!",a,s);t=t||create_rc(o,n);for(var c=0;o>c;c++)for(var i=0;n>i;i++){for(var f=0,l=0;a>l;l++)f+=r[c*a+l]*e[i*s+l];t[c*n+i]=f}return t}function augment(r,e,t){if(r instanceof itf.baseType||(r=create(r)),e instanceof itf.baseType||(e=create(e)),r.rows!=e.rows)return r;void 0==t&&(t=create_rc(r.rows,r.cols+e.cols));for(var o=0;o<r.rows;o++){for(var a=0;a<r.cols;a++)t[o*(r.cols+e.cols)+a]=r[o*r.cols+a];for(var a=0;a<e.cols;a++)t[o*(r.cols+e.cols)+r.cols+a]=e[o*e.cols+a]}return t}function repeat(r,e,t){r instanceof itf.baseType||(r=create(r)),void 0==t&&(t=create_rc(r.rows*e,r.cols));for(var o=0;o<r.rows*e;o++)for(var a=0;a<r.cols;a++)t[o*r.cols+a]=r[o%r.rows*r.cols+a];return t}function print(r,e,t){void 0==e&&(e=6),r instanceof itf.baseType||(r=create(r));for(var o=r.rows,a=r.cols,n="",s=0;o>s;s++){for(var c=0;a>c;c++)n+=("                             "+r[s*a+c].toPrecision(e).replace(/(\..+?)0+$/g,"$1").replace(/\.0$/,"").replace(/.*e\-.*/,"0").replace(/^0$/,t||"0")).slice(-(e+5))+",";n+="\n"}window.console.log(n)}function show(r,e){var t=document.createElement("canvas"),o=t.getContext("2d");t.width=r.cols,t.height=r.rows,(e||document.body).appendChild(t);for(var a=o.createImageData(r.cols,r.rows),n=a.data,s=0,c=0,i=n.length;i>s;c+=1,s+=4)n[s]=256*r[c],n[s+1]=n[s],n[s+2]=n[s],n[s+3]=255;o.putImageData(a,0,0)}function factorLU(r,e){r instanceof itf.baseType||(r=create(r)),void 0==e&&(e=create_clone(r));var t,o,a,n,s=e.rows;for(o=0;s-1>o;o++){if(a=e[o*s+o],0==a)return null;for(i=o+1;s>i;i++)for(e[i*s+o]=n=e[i*s+o]/a,t=o+1;s>t;t++)e[i*s+t]-=n*e[o*s+t]}return 0==e[s*s-1]?null:e}function solveLU(r,e,t){e instanceof itf.baseType||(e=create(e));var o,a,n=(t&&t.set(r),t||create_rc(e.rows,e.cols)),s=r.rows;for(yi=0;yi<e.cols;yi++)for(o=0;s>o;o++){for(a=0,j=0;o>j;j++)a+=r[o*s+j]*n[j*e.cols+yi];n[o*e.cols+yi]=e[o*e.cols+yi]-a}for(yi=0;yi<e.cols;yi++)for(o=s-1;o>=0;o--){for(a=0,j=o+1;s>j;j++)a+=r[o*s+j]*n[j*e.cols+yi];n[o*e.cols+yi]=(n[o*e.cols+yi]-a)/r[o*s+o]}return n}function invertLU(r){return r instanceof itf.baseType||(r=create(r)),solveLU(factorLU(r),identity(r.rows))}function factorLUP(r,e,t){r instanceof itf.baseType||(r=create(r)),void 0==e&&(e=create_clone(r));var o,a,n,s,c,i,f,l,u,p,v=r.rows,y=t||[],h=new itf.baseType(v);for(o=0;v>o;o++){for(y[o]=o,u=0,n=0;v>n;n++)u=Math.max(u,Math.abs(r[o*v+n]));if(0==u)return null;h[o]=1/u}for(s=0;v-1>s;s++){for(u=0,o=s;v>o;o++)a=y[o],(i=Math.abs(r[a*v+s])*h[a])>u&&(u=i,p=o);if(n=y[s],y[s]=y[p],y[p]=n,c=y[s],f=r[c*v+s],0==f)return null;for(o=s+1;v>o;o++)for(a=y[o],r[a*v+s]=l=r[a*v+s]/f,n=s+1;v>n;n++)r[a*v+n]-=l*r[c*v+n]}return 0==r[y[v-1]*v+v-1]?null:r}function solveLUP(r,e,t,o){t instanceof itf.baseType||(t=create(t));var a,n,s=(o&&o.set(t),o||create_rc(t.rows,t.cols)),c=r.rows;for(yi=0;yi<t.cols;yi++)for(a=0;c>a;a++){for(n=0,j=0;a>j;j++)n+=r[e[a]*c+j]*s[j*t.cols+yi];s[a*t.cols+yi]=t[e[a]*t.cols+yi]-n}for(yi=0;yi<t.cols;yi++)for(a=c-1;a>=0;a--){for(n=0,j=a+1;c>j;j++)n+=r[e[a]*c+j]*s[j*t.cols+yi];s[a*t.cols+yi]=(s[a*t.cols+yi]-n)/r[e[a]*c+a]}return s}function invertLUP(r){r instanceof itf.baseType||(r=create(r));var e=[];return factorLUP(r,r,e),solveLUP(r,e,identity(r.rows))}function factorCholesky(r,e){r instanceof itf.baseType||(r=create(r)),void 0==e?e=create_clone(r):e!==r&&e.set(r);var t,o,a,n,s,c,i=e.cols,f=new itf.baseType(i);for(t=0;i>t;t++){for(s=t*i,o=0;t>o;o++){for(c=o*i,f[o]=e[s+o],a=0;o>a;a++)f[o]-=f[a]*e[c+a];if(0==e[c+o])return null;e[s+o]=f[o]/e[c+o]}for(n=e[s+t],a=0;t>a;a++)n-=f[a]*e[s+a];e[s+t]=n}return e}function solveCholesky(r,e,t){e instanceof itf.baseType||(e=create(e));var o,a,n,s=e.cols,c=r.rows,i=t||create_rc(e.rows,s);for(n=0;s>n;n++)for(o=0;c>o;o++)for(i[o*s+n]=e[o*s+n],a=0;o-1>=a;a++)i[o*s+n]-=r[o*c+a]*i[a*s+n];for(n=0;s>n;n++)for(o=c-1;o>=0;o--)for(i[o*s+n]/=r[o*c+o],a=o+1;c>a;a++)i[o*s+n]-=r[a*c+o]*i[a*s+n];return i}function invertCholesky(r){return r instanceof itf.baseType||(r=create(r)),solveCholesky(factorCholesky(r,r),identity(r.rows))}function factorSVD(r,e,t){function o(r,e){return e>=0?Math.abs(r):-Math.abs(r)}function a(r,e){var t,o,a=Math.abs(r),n=Math.abs(e);return a>n?(t=n/a,o=a*Math.sqrt(1+t*t)):n>0?(t=a/n,o=n*Math.sqrt(1+t*t)):o=0,o}var n,s,c,i,f,l,u,p,v,y,h,w,m,g,b,T=r.rows,_=r.cols,d=0,M=0,x=0,k=[];if(_>T)return console.error("only likes thin matrices.");for(s=0;_>s;s++){if(u=s+1,k[s]=x*M,M=w=x=0,T>s){for(l=s;T>l;l++)x+=Math.abs(r[l*_+s]);if(x){for(l=s;T>l;l++)r[l*_+s]=r[l*_+s]/x,w+=r[l*_+s]*r[l*_+s];if(y=r[s*_+s],M=-o(Math.sqrt(w),y),h=y*M-w,r[s*_+s]=y-M,s!=_-1)for(i=u;_>i;i++){for(w=0,l=s;T>l;l++)w+=r[l*_+s]*r[l*_+i];for(y=w/h,l=s;T>l;l++)r[l*_+i]+=y*r[l*_+s]}for(l=s;T>l;l++)r[l*_+s]=r[l*_+s]*x}}if(e[s]=x*M,M=w=x=0,T>s&&s!=_-1){for(l=u;_>l;l++)x+=Math.abs(r[s*_+l]);if(x){for(l=u;_>l;l++)r[s*_+l]=r[s*_+l]/x,w+=r[s*_+l]*r[s*_+l];for(y=r[s*_+u],M=-o(Math.sqrt(w),y),h=y*M-w,r[s*_+u]=y-M,l=u;_>l;l++)k[l]=r[s*_+l]/h;if(s!=T-1)for(i=u;T>i;i++){for(w=0,l=u;_>l;l++)w+=r[i*_+l]*r[s*_+l];for(l=u;_>l;l++)r[i*_+l]+=w*k[l]}for(l=u;_>l;l++)r[s*_+l]=r[s*_+l]*x}}d=Math.max(d,Math.abs(e[s])+Math.abs(k[s]))}for(s=_-1;s>=0;s--){if(_-1>s){if(M){for(i=u;_>i;i++)t[i*t.cols+s]=r[s*_+i]/r[s*_+u]/M;for(i=u;_>i;i++){for(w=0,l=u;_>l;l++)w+=r[s*_+l]*t[l*t.cols+i];for(l=u;_>l;l++)t[l*t.cols+i]+=w*t[l*t.cols+s]}}for(i=u;_>i;i++)t[s*t.cols+i]=t[i*t.cols+s]=0}t[s*t.cols+s]=1,M=k[s],u=s}for(s=_-1;s>=0;s--){if(u=s+1,M=e[s],_-1>s)for(i=u;_>i;i++)r[s*_+i]=0;if(M){if(M=1/M,s!=_-1)for(i=u;_>i;i++){for(w=0,l=u;T>l;l++)w+=r[l*_+s]*r[l*_+i];for(y=w/r[s*_+s]*M,l=s;T>l;l++)r[l*_+i]+=y*r[l*_+s]}for(i=s;T>i;i++)r[i*_+s]=r[i*_+s]*M}else for(i=s;T>i;i++)r[i*_+s]=0;r[s*_+s]++}for(l=_-1;l>=0;l--)for(c=0;30>c;c++){for(n=1,u=l;u>=0;u--){if(p=u-1,Math.abs(k[u])+d==d){n=0;break}if(Math.abs(e[p])+d==d)break}if(n)for(v=0,w=1,s=u;l>=s;s++)if(y=w*k[s],Math.abs(y)+d!=d)for(M=e[s],h=a(y,M),e[s]=h,h=1/h,v=M*h,w=-y*h,i=0;T>i;i++)g=r[i*_+p],b=r[i*_+s],r[i*_+p]=g*v+b*w,r[i*_+s]=b*v-g*w;if(b=e[l],u==l){if(0>b)for(e[l]=-b,i=0;_>i;i++)t[i*t.cols+l]=-t[i*t.cols+l];break}if(c>=30)return console.error("No convergence");for(m=e[u],p=l-1,g=e[p],M=k[p],h=k[l],y=((g-b)*(g+b)+(M-h)*(M+h))/(2*h*g),M=a(y,1),y=((m-b)*(m+b)+h*(g/(y+o(M,y))-h))/m,v=w=1,i=u;p>=i;i++){for(s=i+1,M=k[s],g=e[s],h=w*M,M=v*M,b=a(y,h),k[i]=b,v=y/b,w=h/b,y=m*v+M*w,M=M*v-m*w,h=g*w,g*=v,f=0;_>f;f++)m=t[f*t.cols+i],b=t[f*t.cols+s],t[f*t.cols+i]=m*v+b*w,t[f*t.cols+s]=b*v-m*w;for(b=a(y,h),e[i]=b,b&&(b=1/b,v=y*b,w=h*b),y=v*M+w*g,m=v*g-w*M,f=0;T>f;f++)g=r[f*_+i],b=r[f*_+s],r[f*_+i]=g*v+b*w,r[f*_+s]=b*v-g*w}k[u]=0,k[l]=y,e[l]=m}return r}function solveSVD(r,e,t,o){return mul(t,mul(Matrix.diagi(e),mul(transpose(r),o)))}function invertSVD(r,e){if(r.rows>=r.cols){var t=create_clone(r),o=create_rc(r.cols,1),a=create_rc(r.cols,r.cols);return factorSVD(t,o,a),mulABT(mul(a,Matrix.diagi(o)),t,e)}var t=create_clone(r.t),o=create_rc(r.rows,1),a=create_rc(r.rows,r.rows);return factorSVD(t,o,a),mulABT(mul(VT,Matrix.diagi(o)),t,e).t}function parse(r,e){function t(){var r;return(r=a.shift())in n?0==n[r][3]?t()+n[r][2]:1==n[r][3]?n[r][2]+"("+t()+")":n[r][2]+"("+t()+","+t()+")":r}var o="",a=[],n={"=":[0,!0,"=",0],"~":[5,!0,"Matrix.diag",1],"'":[5,!0,"Matrix.transpose",1],"^":[4,!0,"Matrix.pow",2],"*":[3,!1,"Matrix.mul",2],"/":[3,!1,"Matrix.div",2],"+":[2,!1,"Matrix.add",2],"-":[1,!1,"Matrix.minus",2],"\\":[1,!1,"Matrix.solve",2]};r=r.split("").reverse().join("").replace(/\s+/g," ").split(/([\=\'\~\+\-\*\/\\\^\(\)])/).filter(function(r){return""!=r});for(var s,c=0,i="";s=r[c],c<r.length;i=s,c++)if(isNaN(parseFloat(s))&&(s in n||-1!="()".indexOf(s)))if(s in n){if("-"==s&&(c+1==r.length||r[c+1]in n||-1!="(".indexOf(r[c+1]))){o=o.slice(0,o.length-1)+s+" ";continue}for(var f=s,l=a[a.length-1];l&&l in n&&n[f][1]&&n[f][0]<=n[l][0]||l&&l in n&&!n[f][1]&&n[f][0]<n[l][0];)o+=a.pop()+" ",l=a[a.length-1];a.push(f)}else if(")"===s)a.push(s);else if("("===s){for(;")"!==a[a.length-1];)o+=a.pop()+" ";a.pop()}else o+=" "+s+" ";else o+=s+" ";for(;a.length;)o+=a.pop()+" ";for(a=o.split("").reverse().join("").slice(1).split(/\s+/),o="";a.length;)o+=t();return o=o.replace(/Matrix\.mul\(Matrix.transpose/g,"Matrix.mulATB(").replace(/Matrix\.pow\(Matrix.diag\((.*?)\),-1\)/g,"Matrix.diagi($1)"),void 0===e?new Function("return "+o):e===!1?o:new Function(e,"return "+o)}function solve(r,e){if(r instanceof itf.baseType||(r=create(r)),r.rows==r.cols){var t=create_clone(r);return P=[],solveLUP(factorLUP(t,t,P),P,e)}var t=create_clone(r),o=create_rc(r.cols,1),a=create_rc(r.cols,r.cols);return factorSVD(t,o,a),solveSVD(t,o,a,e)}function pow(r,e){return r instanceof itf.baseType||(r=create(r)),-1==e?invertSVD(r):void 0}function hankel(r,e,t){r instanceof itf.baseType||(r=create(r));var o=e,a=r.length-o+1;void 0==t&&(t=create_rc(a,o));for(var n=0;a>n;n++)for(var s=0;o>s;s++)t[n*o+s]=r[n+s];return t}function toHankel(r,e){r instanceof itf.baseType||(r=create(r)),void 0==e&&(e=create_clone(r));for(var t=r.rows,o=r.cols,a=create_rc(t+o-1,1),n=0;t>n;n++)for(var s=0;s<Math.min(o,n+1);s++)a[n]+=r[(n-s)*o+s]/Math.min(o,n+1);for(var n=1;o>n;n++)for(var s=0;o-n>s;s++)a[t+n-1]+=r[(t-s-1)*o+s+n]/(o-n);return hankel(a,o)}function toeplitz(r,e,t){r instanceof itf.baseType||(A=create(r));var o=e,a=r.length-o+1;void 0==t&&(t=create_rc(a,o));for(var n=0;a>n;n++)for(var s=0;o>s;s++)t[n*o+s]=s>=n?r[s-n]:r[s-n+r.length];return t}function avg(r,e){r instanceof itf.baseType||(r=create(r)),e=e||r.cols;for(var t=create_rc(1,e),o=1/r.rows,a=0;a<r.length/e;a++)for(var n=0;e>n;n++)t[n]+=o*r[a*e+n];return t}function len(r,e){r instanceof itf.baseType||(r=create(r)),e=e||r.cols;for(var t=create_rc(1,e),o=1/r.rows,a=0;a<r.length/e;a++)for(var n=0;e>n;n++)t[n]+=o*Math.pow(r[a*e+n],2);for(var a=0;e>a;a++)t[a]=Math.sqrt(t[a]);return t}function equals(r,e){if(r instanceof itf.baseType||(r=create(r)),e instanceof itf.baseType||(e=create(e)),r.rows!=e.rows||r.cols!=e.cols)return!1;for(var t=0;t<r.length;t++)if(r[t]!=e[t])return!1;return!0}function Matrix(r,e){if("string"==typeof r)return void 0===e||e===!0?e?parse(r):parse.apply(this,arguments)([].slice.call(arguments,2)):2==arguments.length?parse.apply(this,arguments):parse.apply(this,arguments).apply(this,[].slice.call(arguments,2));if(r instanceof Float32Array||r instanceof Float64Array)return y=new itf.baseType(r),y.rows=r.rows||arguments[1]||Math.sqrt(r.length),y.cols=r.cols||arguments[2]||r.length/y.rows,y;if(r instanceof Function){var t=r.toString(),o=t.match(/\((.*?)\)/)[1];return t=t.split("\n").map(function(r){return r.replace(/Matrix\("(.*?)".*\)/,function(r,e){return parse(e,!1)}).replace(/\s*"return\s+(.*?)"/,function(r,e){return"return "+parse(e,!1)}).replace(/\s*"(.*?)"/,function(r,e){return parse(e,!1)+";"})}),t=t.slice(1,t.length-1).join("\n"),new Function(o,t)}return create.apply(this,arguments)}var itf={baseType:Float64Array,create:create,identity:identity,transpose:transpose,normalize:normalize,row:row,add:add,sum:sum,minus:minus,cmul:cmul,mul:mul,mulATB:mulATB,mulATBDI:mulATBDI,mulABT:mulABT,augment:augment,factorLU:factorLU,solveLU:solveLU,invertLU:invertLU,factorLUP:factorLUP,solveLUP:solveLUP,invertLUP:invertLUP,factorCholesky:factorCholesky,solveCholesky:solveCholesky,invertCholesky:invertCholesky,factorSVD:factorSVD,solveSVD:solveSVD,invertSVD:invertSVD,solveSeidel:solveSeidel,parse:parse,solve:solve,pow:pow,print:print,hankel:hankel,toHankel:toHankel,toeplitz:toeplitz,avg:avg,len:len,repeat:repeat,sinc:sinc,wsinc:wsinc,blackman:blackman,hamming:hamming,equals:equals,diag:function(r){r instanceof itf.baseType||(r=Matrix(r));for(var e=create_rc(r.rows,r.rows),t=0;t<r.rows;t++)e[t*r.rows+t]=r[t];return e},diagi:function(r){r instanceof itf.baseType||(r=Matrix(r));for(var e=create_rc(r.rows,r.rows),t=0;t<r.rows;t++)e[t*r.rows+t]=r[t]>1e-12?1/r[t]:0;return e},show:show};itf.baseType.prototype.__defineGetter__("t",function(){return transpose(this)}),itf.baseType.prototype.__defineGetter__("i",function(){return invertLUP(this)}),itf.baseType.prototype.__defineGetter__("avg",function(){return this.avgrow().repeat(this.rows)}),itf.baseType.prototype.__defineGetter__("SVD",function(){var r=this,e=create_rc(r.cols,1),t=create_rc(r.cols,r.cols);return factorSVD(r,e,t),[r,e,t]}),itf.baseType.prototype.m=function(r){return mul(this,r)},itf.baseType.prototype.mt=function(r){return mulABT(this,r)},itf.baseType.prototype.add=function(r){return add(this,r)},itf.baseType.prototype.min=function(r){return minus(this,r)},itf.baseType.prototype.cmul=function(r){return cmul(this,r)},itf.baseType.prototype.sub=function(r){return minus(this,r)},itf.baseType.prototype.row=function(r,e){return row(this,r,e)},itf.baseType.prototype.sum=function(){return sum(this)},itf.baseType.prototype.repeat=function(r){return repeat(this,r)},itf.baseType.prototype.avgrow=function(r){return avg(this,r)},itf.baseType.prototype.len=function(r){return len(this,r)},itf.baseType.prototype.solve=function(r){return solve(this,r)},itf.baseType.prototype.log=function(r,e){return print(this,r,e),this},itf.baseType.prototype.equals=function(r){return equals(this,r)};for(var i in itf)Matrix[i]=itf[i];